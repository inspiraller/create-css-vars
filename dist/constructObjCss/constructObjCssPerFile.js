'use strict';var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{'default':mod};};Object.defineProperty(exports,'__esModule',{value:true});const getSafeMarkers_1=__importDefault(require('..\\util\\getSafeMarkers'));const clearCssComents_1=__importDefault(require('..\\util\\clearCssComents'));const regCss_1=require('..\\util\\regCss');const markEndCurly_1=__importDefault(require('..\\util\\markEndCurly'));const execConstructObjCss_1=__importDefault(require('./execConstructObjCss'));const constructCombinedObjCss_1=__importDefault(require('./constructCombinedObjCss'));const constructAnyObjCss_1=__importDefault(require('./constructAnyObjCss'));const constructAnySingles_1=__importDefault(require('./constructAnySingles'));const iterateConstructMediaQObjCss_1=__importDefault(require('./iterateConstructMediaQObjCss'));const replaceMediaQ=(str,m1,m2)=>{str=markEndCurly_1.default(str,m1,m2);str=str.replace(RegExp(`\\@media[^\\${m2}]*\\${m2}`,'g'),'');str=str.replace(RegExp(`\\${m2}`,'g'),'');return str;};const constructObjCssPerFile=(strReadFile,objCssAll,isMediaQ=false)=>{let str=` ${strReadFile}`;const {objM:{m1,m2}}=getSafeMarkers_1.default(str);str=clearCssComents_1.default(str,m1);objCssAll.single=execConstructObjCss_1.default({objCss:objCssAll.single||{},str:str,reg:regCss_1.regMatchAnySingle,constructCssObj:constructAnySingles_1.default});const strExcludeMediaQ=!isMediaQ?replaceMediaQ(str,m1,m2):str;objCssAll.combined=execConstructObjCss_1.default({objCss:objCssAll.combined||{},str:strExcludeMediaQ,reg:regCss_1.regCombined,constructCssObj:constructCombinedObjCss_1.default});objCssAll.single=execConstructObjCss_1.default({objCss:objCssAll.single||{},str:strExcludeMediaQ,reg:regCss_1.regSingle,constructCssObj:constructAnyObjCss_1.default});objCssAll.withchild=execConstructObjCss_1.default({objCss:objCssAll.withchild||{},str:strExcludeMediaQ,reg:regCss_1.regWithChild,constructCssObj:constructAnyObjCss_1.default});objCssAll.pseudo=execConstructObjCss_1.default({objCss:objCssAll.pseudo||{},str:strExcludeMediaQ,reg:regCss_1.regPseudoOrAttr,constructCssObj:constructAnyObjCss_1.default});const objCssWithMediaQ=objCssAll;if(objCssWithMediaQ.mediaq){objCssWithMediaQ.mediaq=iterateConstructMediaQObjCss_1.default({objMediaQ:objCssWithMediaQ.mediaq,str,m1,m2});}objCssAll.beginNonSingle=execConstructObjCss_1.default({objCss:objCssAll.beginNonSingle||{},str:strExcludeMediaQ,reg:regCss_1.regBeginNonSingle,constructCssObj:constructAnyObjCss_1.default});return objCssAll;};exports.default=constructObjCssPerFile;