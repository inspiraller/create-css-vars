'use strict';var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{'default':mod};};Object.defineProperty(exports,'__esModule',{value:true});exports.constructEnforceMediaQKey=void 0;const markEndCurly_1=__importDefault(require('..\\util\\markEndCurly'));const constructAnyObjCss_1=__importDefault(require('./constructAnyObjCss'));const execConstructObjCss_1=__importDefault(require('./execConstructObjCss'));const constructObjCssPerFile_1=__importDefault(require('./constructObjCssPerFile'));const constructEnforceMediaQKey=({objCss,strSelectors,strCss})=>{strSelectors=strSelectors.replace(/([\(\)\:])/g,' $1 ');strSelectors=strSelectors.replace(/ {2,}/g,' ');return constructAnyObjCss_1.default({objCss,strSelectors,strCss});};exports.constructEnforceMediaQKey=constructEnforceMediaQKey;const getMediaQContent=({str,m2})=>{const reg=RegExp(`(^|\\n)\\s*(\\@media[^\\{\\}]*)()\\{([^\\${m2}]*)\\}${m2}`,'ig');return execConstructObjCss_1.default({objCss:{},str,reg,constructCssObj:exports.constructEnforceMediaQKey});};const iterateConstructMediaQObjCss=({objMediaQ:objMediaQRef,str:strUnmarked,m1,m2})=>{let objMediaQ=Object.assign({},objMediaQRef);const str=markEndCurly_1.default(strUnmarked,m1,m2);const objMediaContent=getMediaQContent({str,m2});objMediaQ=Object.keys(objMediaContent).reduce((accum,cur)=>{const objNew=Object.assign({},accum);const strReadMediaQContent=objMediaContent[cur].join('');objNew[cur]=constructObjCssPerFile_1.default(strReadMediaQContent,objNew[cur]||{},true);return objNew;},objMediaQ);return objMediaQ;};exports.default=iterateConstructMediaQObjCss;