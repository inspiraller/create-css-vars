'use strict';var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{'default':mod};};Object.defineProperty(exports,'__esModule',{value:true});const getSafeMarkers_1=__importDefault(require('..\\getSafeMarkers'));const clearCssComents_1=__importDefault(require('..\\clearCssComents'));const regCss_1=require('..\\regCss');const markEndCurly_1=__importDefault(require('..\\markEndCurly'));const execConstructObjCss_1=__importDefault(require('./execConstructObjCss'));const constructCombinedObjCss_1=__importDefault(require('./constructCombinedObjCss'));const constructAnyObjCss_1=__importDefault(require('./constructAnyObjCss'));const constructSinglesWithOnlyMediaQ_1=__importDefault(require('./constructSinglesWithOnlyMediaQ'));const iterateConstructMediaQObjCss_1=__importDefault(require('./iterateConstructMediaQObjCss'));const replaceMediaQ=(str,m1)=>{str=markEndCurly_1.default(str,m1);str=str.replace(RegExp(`\\@media[^\\${m1}]*\\${m1}`,'g'),'');str=str.replace(RegExp(`\\${m1}`,'g'),'');return str;};const constructObjCssPerFile=(strReadFile,objCssAll,isMediaQ=false)=>{let str=strReadFile;const {objM:{m1}}=getSafeMarkers_1.default(str);str=clearCssComents_1.default(str,m1);const strExcludeMediaQ=!isMediaQ?replaceMediaQ(str,m1):str;objCssAll.combined=execConstructObjCss_1.default({objCss:objCssAll.combined||{},str:strExcludeMediaQ,reg:regCss_1.regCombined,constructCssObj:constructCombinedObjCss_1.default});objCssAll.single=execConstructObjCss_1.default({objCss:objCssAll.single||{},str:strExcludeMediaQ,reg:regCss_1.regSingle,constructCssObj:constructAnyObjCss_1.default});objCssAll.single=execConstructObjCss_1.default({objCss:objCssAll.single||{},str:str,reg:regCss_1.regSingle,constructCssObj:constructSinglesWithOnlyMediaQ_1.default});objCssAll.withchild=execConstructObjCss_1.default({objCss:objCssAll.withchild||{},str:strExcludeMediaQ,reg:regCss_1.regWithChild,constructCssObj:constructAnyObjCss_1.default});objCssAll.pseudo=execConstructObjCss_1.default({objCss:objCssAll.pseudo||{},str:strExcludeMediaQ,reg:regCss_1.regPseudoOrAttr,constructCssObj:constructAnyObjCss_1.default});const objCssAllMediaQ=objCssAll;if(objCssAllMediaQ.mediaq){objCssAllMediaQ.mediaq=iterateConstructMediaQObjCss_1.default({objCssMediaQ:objCssAllMediaQ.mediaq,str,m1});}objCssAll.beginNonSingle=execConstructObjCss_1.default({objCss:objCssAll.beginNonSingle||{},str:strExcludeMediaQ,reg:regCss_1.regBeginNonSingle,constructCssObj:constructAnyObjCss_1.default});return objCssAll;};exports.default=constructObjCssPerFile;