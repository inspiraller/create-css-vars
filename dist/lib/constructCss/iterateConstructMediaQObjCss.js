'use strict';var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{'default':mod};};Object.defineProperty(exports,'__esModule',{value:true});exports.deepClone=void 0;const markEndCurly_1=__importDefault(require('..\\markEndCurly'));const constructAnyObjCss_1=__importDefault(require('./constructAnyObjCss'));const execConstructObjCss_1=__importDefault(require('./execConstructObjCss'));const constructObjCssPerFile_1=__importDefault(require('./constructObjCssPerFile'));const appendToMediaQChild=({objBuild:objBuildRef,objGet,strChild})=>{const objBuild=Object.assign({},objBuildRef);const strKeyChild=strChild;if(objBuild[strKeyChild]){const objCss=objBuild[strKeyChild];objBuild[strKeyChild]=Object.keys(objCss).reduce((accumRef,cur)=>{const objCssNew=Object.assign({},accumRef);const strGetContent=objGet[strKeyChild][cur].join('');if(!objCssNew[cur]){objCssNew[cur]=[];}objCssNew[cur].push(strGetContent);return objCssNew;},{});}else{objBuild[strKeyChild]=objGet[strKeyChild];};return objBuild;};function deepClone(obj){return JSON.parse(JSON.stringify(obj));}exports.deepClone=deepClone;const iterateConstructMediaQObjCss=({objCssMediaQ:objCssMediaQRef,str:strUnmarked,m1,m2})=>{let objCssMediaQ=Object.assign({},objCssMediaQRef);const str=markEndCurly_1.default(strUnmarked,m1,m2);const regMediaQ=RegExp(`(^|\\n)\\s*(\\@media[^\\{\\}]*)()\\{([^\\${m2}]*)\\}${m2}`,'ig');let objMediaContent={};objMediaContent=execConstructObjCss_1.default({objCss:objMediaContent,str,reg:regMediaQ,constructCssObj:constructAnyObjCss_1.default});objCssMediaQ=Object.keys(objMediaContent).reduce((accumRef,cur)=>{const objNew=Object.assign({},accumRef);const strReadMediaQContent=objMediaContent[cur].join('');const objCssAllMediaQ=constructObjCssPerFile_1.default(strReadMediaQContent,objNew[cur]||{},true);if(objNew[cur]){objNew[cur]=appendToMediaQChild({objBuild:objNew[cur],objGet:objCssAllMediaQ,strChild:'combined'});objNew[cur]=appendToMediaQChild({objBuild:objNew[cur],objGet:objCssAllMediaQ,strChild:'single'});objNew[cur]=appendToMediaQChild({objBuild:objNew[cur],objGet:objCssAllMediaQ,strChild:'pseudo'});objNew[cur]=appendToMediaQChild({objBuild:objNew[cur],objGet:objCssAllMediaQ,strChild:'withchild'});objNew[cur]=appendToMediaQChild({objBuild:objNew[cur],objGet:objCssAllMediaQ,strChild:'beginNonSingle'});}else{objNew[cur]=objCssAllMediaQ;}return objNew;},objCssMediaQ);return objCssMediaQ;};exports.default=iterateConstructMediaQObjCss;